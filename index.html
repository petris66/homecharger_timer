<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kotilatauksen ajastin</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b1220">
  <link rel="icon" href="icons/icon-512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">

  <style>
    :root { color-scheme: dark; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:#0b1220; color:#e8eefc; }
    .wrap { max-width: 520px; margin: 0 auto; padding: 18px; }
    .card { background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.10); border-radius: 16px; padding: 16px; }
    h1 { font-size: 22px; margin: 0 0 10px; }
    label { display:block; font-size: 13px; opacity:.9; margin: 12px 0 6px; }
    input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.15); background: rgba(0,0,0,.25); color: #e8eefc; font-size: 16px; }
    button { width:100%; margin-top: 12px; padding: 12px; border-radius: 12px; border: 0; font-weight: 700; font-size: 16px; background: #22c55e; color: #04140a; }
    .out { margin-top: 12px; line-height: 1.35; }
    .pill { display:inline-block; padding: 4px 10px; border-radius: 999px; background: rgba(34,197,94,.15); border: 1px solid rgba(34,197,94,.35); }
    .muted { opacity:.8; font-size: 13px; margin-top: 10px; }
    .quick{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.qbtn{
  flex: 1 1 80px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#e8eefc;
  font-weight:700;
}

.qbtn:active{
  transform: translateY(1px);
}

.qbtn[data-target="100"]{
  border-color: rgba(34,197,94,.45);
  background: rgba(34,197,94,.14);
}
.qbtn.full {
  background: rgba(34, 197, 94, 0.22);
  border-color: rgba(34, 197, 94, 0.55);
  color: #eafff1;
}

  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>Kotilatauksen ajastin</h1>

      <label for="currentPercent">Akun varaustila nyt (%)</label>
      <input id="currentPercent" type="number" min="0" max="100" inputmode="numeric" placeholder="esim. 35">

      <label for="targetPercent">Mihin asti lataat (%)</label>
      <input id="targetPercent" type="number" min="0" max="100" inputmode="numeric" placeholder="esim. 80">
      <div class="quick" aria-label="Pikavalinnat">
  <button type="button" class="qbtn" data-target="80">80%</button>
  <button type="button" class="qbtn" data-target="85">85%</button>
  <button type="button" class="qbtn" data-target="90">90%</button>
  <button type="button" class="qbtn full" data-target="100">Täyteen</button>

</div>


      <button id="calcBtn">Laske</button>

      <div class="out" id="result"></div>
      <div class="muted">Sääntö: 5% = 15 min (eli 1% = 3 min). Jos tavoite on 100%, ajastinta ei tarvita.</div>
    </div>
  </div>

 <script>
  const $ = (id) => document.getElementById(id);
  function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

  function calculate() {
    let cur = Number($("currentPercent").value);
    let tar = Number($("targetPercent").value);

    if (!Number.isFinite(cur) || !Number.isFinite(tar)) {
      $("result").innerHTML = "Anna molemmat prosentit.";
      return;
    }

    cur = clamp(cur, 0, 100);
    tar = clamp(tar, 0, 100);

    if (tar === 100) {
      $("result").innerHTML =
        `<span class="pill">100% valittu</span><br>` +
        `Et tarvitse ajastusta — voit jättää auton latautumaan, ja lataus päättyy automaattisesti kun akku on täynnä.`;
      return;
    }

    if (tar <= cur) {
      $("result").innerHTML = `Tavoite (${tar}%) on ≤ nykytila (${cur}%). Ei tarvetta ladata.`;
      return;
    }

    const diff = tar - cur;
    const minutes = diff * 3; // 1% = 3 min
    const h = Math.floor(minutes / 60);
    const m = minutes % 60;
    const timeStr = (h > 0) ? `${h} h ${m} min` : `${m} min`;

$("result").innerHTML =
  `<b>Aseta ajastin:</b> ${timeStr}<br>` +
  `<span class="muted">(${cur}% → ${tar}% = ${diff}%)</span>`;
  }

  // Laske-nappi
  $("calcBtn").addEventListener("click", calculate);

  // Pikapainikkeet (aseta tavoite + laske)
  document.querySelectorAll(".qbtn").forEach(btn => {
    btn.addEventListener("click", () => {
      $("targetPercent").value = btn.dataset.target;
      calculate();
    });
  });
</script>

</body>
</html>
